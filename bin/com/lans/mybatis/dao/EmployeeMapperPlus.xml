<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lans.mybatis.dao.EmployeeMapperPlus">
	<resultMap id="myemp" type="employee">
		<id column="id" property="id"/>
		<result column="last_name" property="lastName"/>
		<result column="email" property="email"/>
		<result column="gender" property="gender"/>
	</resultMap>

	<select id="getEmpById" resultMap="myemp">
		SELECT * FROM employee WHERE id=#{id}
	</select>
	
	<resultMap id="myemp1" type="employee">
		<id column="id" property="id"/>
		<result column="last_name" property="lastName"/>
		<result column="gender" property="gender"/>
		<result column="email" property="email"/>
		<result column="dept_id" property="dept.id"/>
		<result column="dept_name" property="dept.departmentName"/>
	</resultMap> 
	
	<resultMap id="myemp2" type="employee">
		<id column="id" property="id"/>
		<result column="last_name" property="lastName"/>
		<result column="gender" property="gender"/>
		<result column="email" property="email"/>
		<association property="dept" javaType="dept">
			<id column="dept_id" property="id"/>
			<result column="dept_name" property="departmentName"/>
		</association>
	</resultMap> 
	
	<select id="getEmpAndDept" resultMap="myemp2">
		select e.id,e.last_name,e.email,e.gender,d.id dept_id,dept_name 
		from employee e,dept d where e.dept_id = d.id and e.id=#{id}
	</select>
	
	<resultMap type="employee" id="myempbystep">
		<id column="id" property="id"/>
		<result column="last_name" property="lastName"/>
		<result column="email" property="email"/>
		<result column="gender" property="gender"/>
		<association property="dept" javaType="dept" column="dept_id"
			select="com.lans.mybatis.dao.DepartmentMapper.getDeptById"/>
	</resultMap>
	<select id="getEmpByIdStep" resultMap="myempbystep">
		SELECT * FROM employee WHERE id=#{id}
	</select>
	
	<select id="getEmpsByDept" resultType="employee">
		SELECT * FROM employee WHERE dept_id=#{dept_id}
	</select>
</mapper>